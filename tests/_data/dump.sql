PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "action" (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, type_id INTEGER DEFAULT NULL, mouvement_id INTEGER DEFAULT NULL, type_mouvement_action_id INTEGER DEFAULT NULL, constat_id INTEGER DEFAULT NULL, commentaire CLOB DEFAULT NULL, date_debut DATETIME NOT NULL, date_fin DATETIME NOT NULL, delai INTEGER NOT NULL, nature_action VARCHAR(255) DEFAULT NULL);
CREATE TABLE type_constat_action (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) NOT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE alerte (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, action_id INTEGER DEFAULT NULL, date DATETIME NOT NULL);
CREATE TABLE oeuvre_art (id INTEGER NOT NULL, date_creation DATETIME DEFAULT NULL, longueur_totale DOUBLE PRECISION DEFAULT NULL, largeur_totale DOUBLE PRECISION DEFAULT NULL, hauteur_totale DOUBLE PRECISION DEFAULT NULL, signature_inscription VARCHAR(255) DEFAULT NULL, mots_descriptifs VARCHAR(255) DEFAULT NULL, valeur_assurance INTEGER DEFAULT NULL, date_valeur_assurance DATETIME DEFAULT NULL, date_depot DATETIME DEFAULT NULL, numero_arret INTEGER DEFAULT NULL, autres_inscription VARCHAR(255) DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE objet_mobilier (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, epoque_id INTEGER DEFAULT NULL, style_id INTEGER DEFAULT NULL, matiere_technique_id INTEGER DEFAULT NULL, denomination_id INTEGER DEFAULT NULL, domaine_id INTEGER DEFAULT NULL, status_id INTEGER DEFAULT NULL, titre VARCHAR(255) DEFAULT NULL, longueur VARCHAR(100) DEFAULT NULL, largeur VARCHAR(100) DEFAULT NULL, hauteur VARCHAR(100) DEFAULT NULL, profondeur VARCHAR(100) DEFAULT NULL, diametre VARCHAR(100) DEFAULT NULL, poids VARCHAR(100) DEFAULT NULL, nombre_unite INTEGER DEFAULT NULL, description_commentaire CLOB DEFAULT NULL, table_associee VARCHAR(255) NOT NULL);
CREATE TABLE objet_mobilier_auteur (objet_mobilier_id INTEGER NOT NULL, auteur_id INTEGER NOT NULL, PRIMARY KEY(objet_mobilier_id, auteur_id));
CREATE TABLE log_oeuvre (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, objet_mobilier_id INTEGER DEFAULT NULL, date DATETIME DEFAULT NULL);
CREATE TABLE fichier_joint (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, objet_mobilier_id INTEGER DEFAULT NULL, date DATETIME DEFAULT NULL, commentaire CLOB DEFAULT NULL, lien VARCHAR(255) NOT NULL, image_principale BOOLEAN NOT NULL);
CREATE TABLE auteur (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, type_id INTEGER DEFAULT NULL, prenom VARCHAR(255) DEFAULT NULL, nom VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE type_auteur (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE batiment (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, site_id INTEGER DEFAULT NULL, commune_id INTEGER DEFAULT NULL, nom VARCHAR(255) DEFAULT NULL, addresse VARCHAR(255) DEFAULT NULL, distrib VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL, cedex VARCHAR(255) DEFAULT NULL);
CREATE TABLE commune (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, departement_id INTEGER DEFAULT NULL, nom VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL);
CREATE TABLE correspondant (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, etablissement_id INTEGER DEFAULT NULL, sous_direction_id INTEGER DEFAULT NULL, service_id INTEGER DEFAULT NULL, prenom VARCHAR(255) DEFAULT NULL, nom VARCHAR(255) DEFAULT NULL, telephone VARCHAR(255) DEFAULT NULL, fax VARCHAR(255) DEFAULT NULL, mail VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_fin DATETIME DEFAULT NULL);
CREATE TABLE denomination (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, domaine_id INTEGER DEFAULT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE denomination_matiere_technique (denomination_id INTEGER NOT NULL, matiere_technique_id INTEGER NOT NULL, PRIMARY KEY(denomination_id, matiere_technique_id));
CREATE TABLE departement (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, region_id INTEGER DEFAULT NULL, nom VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL);
CREATE TABLE deposant (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, type_deposant_id INTEGER DEFAULT NULL, sigle VARCHAR(255) DEFAULT NULL, nom VARCHAR(255) DEFAULT NULL, adresse VARCHAR(255) DEFAULT NULL, ville VARCHAR(255) DEFAULT NULL, departement VARCHAR(255) DEFAULT NULL, distrib VARCHAR(255) DEFAULT NULL, tel VARCHAR(255) DEFAULT NULL, fax VARCHAR(255) DEFAULT NULL, mail VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_fin DATETIME DEFAULT NULL, contact VARCHAR(255) DEFAULT NULL, commentaire CLOB DEFAULT NULL);
CREATE TABLE statut_depot (id INTEGER NOT NULL, deposant_id INTEGER DEFAULT NULL, numero_inventaire INTEGER DEFAULT NULL, date_depot DATETIME DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE statut (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, type VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_fin DATETIME DEFAULT NULL, commentaire CLOB DEFAULT NULL, table_associee VARCHAR(255) NOT NULL);
CREATE TABLE type_deposant (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE mode_entree (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE epoque (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE etablissement (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, ministere_id INTEGER DEFAULT NULL, type_id INTEGER DEFAULT NULL, libelle VARCHAR(255) DEFAULT NULL, sigle VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL);
CREATE TABLE type_etablissement (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL);
CREATE TABLE domaine (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE localisation (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, etablissement_id INTEGER DEFAULT NULL, sous_direction_id INTEGER DEFAULT NULL, type_id INTEGER DEFAULT NULL, piece_id INTEGER DEFAULT NULL);
CREATE TABLE type_localisation (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE matiere_technique (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, type VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE ministere (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, nom VARCHAR(255) DEFAULT NULL, sigle VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL);
CREATE TABLE mouvement (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, localisation_id INTEGER DEFAULT NULL, type_id INTEGER DEFAULT NULL, objet_mobilier_id INTEGER DEFAULT NULL, date DATETIME NOT NULL, commentaire CLOB DEFAULT NULL);
CREATE TABLE mouvement_correspondant (mouvement_id INTEGER NOT NULL, correspondant_id INTEGER NOT NULL, PRIMARY KEY(mouvement_id, correspondant_id));
CREATE TABLE type_mouvement_action (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, type_mouvement_id INTEGER DEFAULT NULL, libelle VARCHAR(255) NOT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE type_mouvement (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(150) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE mobilier_bureau (id INTEGER NOT NULL, fournisseur VARCHAR(255) DEFAULT NULL, prix_achat DOUBLE PRECISION DEFAULT NULL, etat VARCHAR(255) DEFAULT NULL, volume_unitaire DOUBLE PRECISION DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE statut_propriete (id INTEGER NOT NULL, mode_entree_id INTEGER DEFAULT NULL, categorie_id INTEGER DEFAULT NULL, date_entree DATETIME DEFAULT NULL, marquage VARCHAR(255) DEFAULT NULL, propUnPourCent BOOLEAN DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE categorie (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE region (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, nom VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL);
CREATE TABLE constat (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, sous_type_constat_id INTEGER DEFAULT NULL, objet_mobilier_id INTEGER DEFAULT NULL, date DATETIME NOT NULL, commentaire CLOB DEFAULT NULL, titre_perception BOOLEAN DEFAULT NULL);
CREATE TABLE sous_type_constat (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, type_constat_id INTEGER DEFAULT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE type_constat (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) NOT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE responsable (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, nom VARCHAR(255) DEFAULT NULL, prenom VARCHAR(255) DEFAULT NULL, telephone VARCHAR(255) DEFAULT NULL, fax VARCHAR(255) DEFAULT NULL, mail VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_fin DATETIME DEFAULT NULL);
CREATE TABLE responsable_batiment (responsable_id INTEGER NOT NULL, batiment_id INTEGER NOT NULL, PRIMARY KEY(responsable_id, batiment_id));
CREATE TABLE piece (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, batiment_id INTEGER DEFAULT NULL, reference VARCHAR(255) DEFAULT NULL, niveau VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_fin DATETIME DEFAULT NULL);
CREATE TABLE service (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, sous_direction_id INTEGER DEFAULT NULL, libelle VARCHAR(255) DEFAULT NULL, sigle VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL);
CREATE TABLE site (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_disparition DATETIME DEFAULT NULL);
CREATE TABLE style (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, libelle VARCHAR(255) DEFAULT NULL, actif BOOLEAN NOT NULL);
CREATE TABLE sous_direction (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, etablissement_id INTEGER DEFAULT NULL, libelle VARCHAR(255) DEFAULT NULL, sigle VARCHAR(255) DEFAULT NULL, date_debut DATETIME DEFAULT NULL, date_fin DATETIME DEFAULT NULL);
CREATE TABLE utilisateur (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, username VARCHAR(50) NOT NULL, first_name VARCHAR(50) NOT NULL, last_name VARCHAR(50) NOT NULL, password VARCHAR(100) DEFAULT NULL, roles CLOB DEFAULT NULL --(DC2Type:array)
, comment CLOB DEFAULT NULL, start_date DATETIME DEFAULT NULL, end_date DATETIME DEFAULT NULL);
INSERT INTO utilisateur VALUES(1,'admin@talan.com','Adah','Reichel','$2y$13$ZOKLCRV9Gm7U6d/XKAtmNuVk8gDrDJXhuSVPOmjoHriuNP573R6k2','a:1:{i:0;s:9:"ROLE_USER";}',NULL,NULL,NULL);
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('utilisateur',1);
CREATE INDEX IDX_47CC8C92C54C8C93 ON "action" (type_id);
CREATE INDEX IDX_47CC8C92ECD1C222 ON "action" (mouvement_id);
CREATE INDEX IDX_47CC8C92E8BC2E97 ON "action" (type_mouvement_action_id);
CREATE INDEX IDX_47CC8C92BDDDB8C ON "action" (constat_id);
CREATE INDEX IDX_3AE753A9D32F035 ON alerte (action_id);
CREATE INDEX IDX_A38B3DB645E7D711 ON objet_mobilier (epoque_id);
CREATE INDEX IDX_A38B3DB6BACD6074 ON objet_mobilier (style_id);
CREATE INDEX IDX_A38B3DB65564D221 ON objet_mobilier (matiere_technique_id);
CREATE INDEX IDX_A38B3DB6E9293F06 ON objet_mobilier (denomination_id);
CREATE INDEX IDX_A38B3DB64272FC9F ON objet_mobilier (domaine_id);
CREATE INDEX IDX_A38B3DB66BF700BD ON objet_mobilier (status_id);
CREATE INDEX IDX_9EC00F42B7105527 ON objet_mobilier_auteur (objet_mobilier_id);
CREATE INDEX IDX_9EC00F4260BB6FE6 ON objet_mobilier_auteur (auteur_id);
CREATE INDEX IDX_20047D5CB7105527 ON log_oeuvre (objet_mobilier_id);
CREATE INDEX IDX_AAACC83FB7105527 ON fichier_joint (objet_mobilier_id);
CREATE INDEX IDX_55AB140C54C8C93 ON auteur (type_id);
CREATE INDEX IDX_F5FAB00CF6BD1646 ON batiment (site_id);
CREATE INDEX IDX_F5FAB00C131A4F72 ON batiment (commune_id);
CREATE INDEX IDX_E2E2D1EECCF9E01E ON commune (departement_id);
CREATE INDEX IDX_E4DD79A3FF631228 ON correspondant (etablissement_id);
CREATE INDEX IDX_E4DD79A310E381F2 ON correspondant (sous_direction_id);
CREATE INDEX IDX_E4DD79A3ED5CA9E6 ON correspondant (service_id);
CREATE INDEX IDX_15AEA10C4272FC9F ON denomination (domaine_id);
CREATE INDEX IDX_CD45773AE9293F06 ON denomination_matiere_technique (denomination_id);
CREATE INDEX IDX_CD45773A5564D221 ON denomination_matiere_technique (matiere_technique_id);
CREATE INDEX IDX_C1765B6398260155 ON departement (region_id);
CREATE INDEX IDX_64C4A25E4B42C9BD ON deposant (type_deposant_id);
CREATE INDEX IDX_7569E4C25B1E2C ON statut_depot (deposant_id);
CREATE INDEX IDX_20FD592CAD745416 ON etablissement (ministere_id);
CREATE INDEX IDX_20FD592CC54C8C93 ON etablissement (type_id);
CREATE INDEX IDX_BFD3CE8FFF631228 ON localisation (etablissement_id);
CREATE INDEX IDX_BFD3CE8F10E381F2 ON localisation (sous_direction_id);
CREATE INDEX IDX_BFD3CE8FC54C8C93 ON localisation (type_id);
CREATE INDEX IDX_BFD3CE8FC40FCFA8 ON localisation (piece_id);
CREATE INDEX IDX_5B51FC3EC68BE09C ON mouvement (localisation_id);
CREATE INDEX IDX_5B51FC3EC54C8C93 ON mouvement (type_id);
CREATE INDEX IDX_5B51FC3EB7105527 ON mouvement (objet_mobilier_id);
CREATE INDEX IDX_57A584D2ECD1C222 ON mouvement_correspondant (mouvement_id);
CREATE INDEX IDX_57A584D2BBE04A3B ON mouvement_correspondant (correspondant_id);
CREATE INDEX IDX_6A1383156B927827 ON type_mouvement_action (type_mouvement_id);
CREATE INDEX IDX_D206CE51C8A5F4A8 ON statut_propriete (mode_entree_id);
CREATE INDEX IDX_D206CE51BCF5E72D ON statut_propriete (categorie_id);
CREATE INDEX IDX_F96EDD98DAAF40C5 ON constat (sous_type_constat_id);
CREATE INDEX IDX_F96EDD98B7105527 ON constat (objet_mobilier_id);
CREATE INDEX IDX_6EDFEA0816DE0DA9 ON sous_type_constat (type_constat_id);
CREATE INDEX IDX_D152DC1653C59D72 ON responsable_batiment (responsable_id);
CREATE INDEX IDX_D152DC16D6F6891B ON responsable_batiment (batiment_id);
CREATE INDEX IDX_44CA0B23D6F6891B ON piece (batiment_id);
CREATE INDEX IDX_E19D9AD210E381F2 ON service (sous_direction_id);
CREATE INDEX IDX_25433AFCFF631228 ON sous_direction (etablissement_id);
CREATE UNIQUE INDEX UNIQ_1D1C63B3F85E0677 ON utilisateur (username);
COMMIT;
